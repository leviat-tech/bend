!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("bend",[],n):"object"==typeof exports?exports.bend=n():t.bend=n()}("undefined"!=typeof self?self:this,function(){return function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var r={};return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return p(t)||s(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,n){if(t){if("string"==typeof t)return c(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,n):void 0}}function s(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function p(t){if(Array.isArray(t))return c(t)}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function f(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,e)}return r}function y(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?f(Object(r),!0).forEach(function(n){l(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function d(t){var n=t.path,r=void 0===n?"":n,e=t.initialPosition,i=void 0===e?{x:0,y:0}:e,o=t.initialDirection,a=void 0===o?{x:1,y:0}:o;if(!(this instanceof d))return new d({path:r,initialPosition:i,initialDirection:a});this.path=r,this.initialPosition=(0,m.default)(i),this.initialDirection=(0,m.default)(a)}function h(t){return new d(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=h;var m=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==e(t)&&"function"!=typeof t)return{default:t};var n=i();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}(r(1)),b={d:function(t){var n=t.instructions,r=t.params,e=r.pop()/2;return n.unshift({type:"barRadius",radius:e}),{instructions:n,params:r}},s:function(t){var n=t.instructions,r=t.params,e=r.pop()/2;return n.push({type:"bendRadius",radius:e}),{instructions:n,params:r}},l:function(t){var n,r=t.instructions,e=t.params,i=parseFloat(e.pop()),o=r.length-1;return r[o]&&"turn"===r[o].type&&(n=i-r[o].shift),r[o]&&"bend"===r[o].type&&(n=i-r[o].lengthToTangent-r[o].shift),r.push({type:"forward",length:n||i,projectedLength:i}),{instructions:r,params:e}},w:function(t){for(var n=t.instructions,r=t.params,e=r.pop(),i=n.length-1,o=0,a=i;a>=0;a-=1)if("barRadius"===n[a].type){o=n[a].radius;break}for(var u=0,s=i;s>=0;s-=1)if("bendRadius"===n[s].type){u=n[s].radius+o;break}var p=0!==o?Math.abs(o*Math.tan((0,m.deg2rad)(e/2))):0;if(n[i].length-=p,0===u)n.push({type:"turn",angle:e,shift:p});else{var c=u/Math.tan((0,m.deg2rad)(180-Math.abs(e))/2);n[i].length-=c,n.push({type:"bend",angle:e,lengthToTangent:c,shift:p,radius:u})}return{instructions:n,params:r}},div:function(t){var n=t.instructions,r=t.params,e=r.pop(),i=r.pop();return r.push(i/e),{instructions:n,params:r}},atan:function(t){var n=t.instructions,r=t.params,e=r.pop();return r.push((0,m.rad2deg)(Math.atan(e))),{instructions:n,params:r}},neg:function(t){var n=t.instructions,r=t.params,e=r.pop();return r.push(-e),{instructions:n,params:r}}},g={barRadius:function(t){var n=t.pen,r=t.instruction;return{pen:y(y({},n),{},{barRadius:r.radius}),commands:null}},bendRadius:function(t){var n=t.pen,r=t.instruction;return{pen:y(y({},n),{},{bendRadius:r.radius}),commands:null}},forward:function(t){var n=t.pen,r=t.instruction,e=n.position.add(n.direction.scale(r.length));return{pen:y(y({},n),{},{position:e}),commands:[{type:"lineto",params:[e.x,e.y]}]}},bend:function(t){var n=t.pen,r=t.instruction,e=n.bendRadius||0,i=n.barRadius||0,o=e+i,a=n.direction.rotateDeg(r.angle),u=n.position.add(n.direction.scale(r.lengthToTangent)).add(a.scale(r.lengthToTangent)),s=r.angle>0?1:0,p=(0,m.default)(n.position).dist(u)/2,c=o-Math.sqrt(o*o-p*p),f=1===s?1:-1;return{pen:y(y({},n),{},{position:u,direction:a}),commands:[{type:"arcto",params:[u.x,u.y,f*(c/p)],svgParams:[o,o,0,0,s,u.x,u.y]}]}},turn:function(t){var n=t.pen,r=t.instruction;return{pen:y(y({},n),{},{direction:n.direction.rotateDeg(r.angle)}),commands:null}}},v=function(t){var n=(t.type,t.params);return{x:n[0],y:n[1]}},x=function(t){var n=t.type,r=t.params,e=t.svgParams,i=r.slice();return i.splice(1,1,-r[1]),"arcto"===n?{type:n,params:[r[0],-r[1],-r[2]],svgParams:[e[0],e[1],e[2],e[3],e[4]?0:1,e[5],-e[6]]}:{type:n,params:i}};d.prototype.list=function(){return this.path.split(" ")},d.prototype.instructions=function(){var t={instructions:[],params:[]};return this.list().forEach(function(n){b[n]?t=b[n](t):t.params.push(n)}),t.instructions},d.prototype.commands=function(){var t={position:this.initialPosition,direction:this.initialDirection},n=[{type:"moveto",params:[t.position.x,t.position.y]}];return this.instructions().forEach(function(r){var e=g[r.type]({pen:t,instruction:r}),i=e.pen,o=e.commands;o&&(n=n.concat(o)),t=i}),n},d.prototype.segments=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.invertY,r=void 0!==n&&n,e=r?this.commands().map(function(t){return x(t)}):this.commands(),i=v(e[0]),o=[];return e.slice(1).forEach(function(t){var n=v(t),r=(0,m.default)(n).subtract(i),e=(0,m.default)(i).add(r.scale(.5));o.push({type:t.type,points:[i,n],midpoint:e}),i={x:n.x,y:n.y}}),o},d.prototype.steps=function(){return this.instructions().reduce(function(t,n){if("forward"===n.type)t.push({length:n.projectedLength,termination:"cut"});else if(["bend","turn"].includes(n.type)){var r=t[t.length-1],e=t[0];r.termination="bend",r.sign=Math.sign(n.angle),r.angle=Math.abs(n.angle);var i=e&&"bend"===e.termination&&e.sign!==r.sign;r.turn=!!i}return t},[])},d.prototype.length=function(){return this.instructions().reduce(function(t,n){return"forward"===n.type?t+n.length:"bend"===n.type?t+Math.abs(n.radius*(0,m.deg2rad)(n.angle)):t},0)},d.prototype.print=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.invertY,r=void 0!==n&&n,e={moveto:"M",lineto:"L",arcto:"A"};return this.commands().map(function(t){var n=t;r&&(n=x(t));var i="arcto"===n.type?n.svgParams:n.params;return[e[t.type]].concat(o(i)).join(" ")}).join(" ")}},function(t,n,r){!function(n,r){t.exports=r()}("undefined"!=typeof self&&self,function(){return function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var r={};return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";function e(t){return t*(Math.PI/180)}function i(t){return t*(180/Math.PI)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,r=t.y;if(!(this instanceof o))return new o({x:n,y:r});this.x=n||0,this.y=r||0}function a(t){return new o(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=a,n.deg2rad=e,n.rad2deg=i,o.prototype.cross=function(t){return this.x*t.y-this.y*t.x},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y},o.prototype.divide=function(t){return new o({x:this.x/t.x,y:this.y/t.y})},o.prototype.magnitude=function(){return Math.sqrt(this.dot({x:this.x,y:this.y}))},o.prototype.length=function(){return this.magnitude()},o.prototype.add=function(t){return new o({x:this.x+t.x,y:this.y+t.y})},o.prototype.subtract=function(t){return new o({x:this.x-t.x,y:this.y-t.y})},o.prototype.scale=function(t){return new o({x:this.x*t,y:this.y*t})},o.prototype.multiplyScalar=function(t){return this.scale(t)},o.prototype.angle=function(){return Math.atan2(this.y,this.x)},o.prototype.angleDeg=function(){return i(this.angle())},o.prototype.reverse=function(){return new o({x:-this.x,y:-this.y})},o.prototype.invert=function(){return this.reverse()},o.prototype.normalize=function(){var t=this.magnitude();return t<=0?new o({x:0,y:0}):this.scale(1/t)},o.prototype.direction=function(t){var n=new o(t).subtract({x:this.x,y:this.y}),r=n.magnitude();return r<=0?new o({x:1,y:0}):n.scale(1/r)},o.prototype.equal=function(t){return this.x===t.x&&this.y===t.y},o.prototype.rotate=function(t){return new o({x:Math.cos(t)*this.x-Math.sin(t)*this.y,y:Math.sin(t)*this.x+Math.cos(t)*this.y})},o.prototype.rotateDeg=function(t){var n=e(t);return this.rotate(n)},o.prototype.dist=function(t){return this.subtract(t).magnitude()},o.prototype.distSq=function(t){var n=this.subtract(t);return n.dot({x:n.x,y:n.y})},o.prototype.clone=function(){return new o({x:this.x,y:this.y})},o.prototype.get=function(){return{x:this.x,y:this.y}}}])})}])});