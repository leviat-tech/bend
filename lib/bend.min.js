!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("bend",[],n):"object"==typeof exports?exports.bend=n():t.bend=n()}("undefined"!=typeof self?self:this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function i(t){return c(t)||s(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,n){if(t){if("string"==typeof t)return p(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(t,n):void 0}}function s(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return p(t)}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function f(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function y(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?f(Object(e),!0).forEach(function(n){l(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function l(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function d(t){var n=t.path,e=void 0===n?"":n,r=t.initialPosition,o=void 0===r?{x:0,y:0}:r,i=t.initialDirection,a=void 0===i?{x:1,y:0}:i;if(!(this instanceof d))return new d({path:e,initialPosition:o,initialDirection:a});this.path=e,this.initialPosition=(0,m.default)(o),this.initialDirection=(0,m.default)(a)}function h(t){return new d(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=h;var m=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=o();if(n&&n.has(t))return n.get(t);var e={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(e,a,u):e[a]=t[a]}return e.default=t,n&&n.set(t,e),e}(e(1)),b={d:function(t){var n=t.instructions,e=t.params,r=e.pop()/2;return n.unshift({type:"barRadius",radius:r}),{instructions:n,params:e}},s:function(t){var n=t.instructions,e=t.params,r=e.pop()/2;return n.push({type:"bendRadius",radius:r}),{instructions:n,params:e}},l:function(t){var n,e=t.instructions,r=t.params,o=parseFloat(r.pop()),i=e.length-1;return e[i]&&"bend"===e[i].type&&(n=o-e[i].lengthToTangent),e.push({type:"forward",length:n||o,projectedLength:o}),{instructions:e,params:r}},w:function(t){for(var n=t.instructions,e=t.params,r=e.pop(),o=n.length-1,i=0,a=o;a>=0;a-=1)if("bendRadius"===n[a].type){i=n[a].radius;break}if(0===i)n.push({type:"turn",angle:r});else{var u=i/Math.tan((0,m.deg2rad)(180-Math.abs(r))/2);n[o].length-=u,n.push({type:"bend",angle:r,lengthToTangent:u,radius:i})}return{instructions:n,params:e}},div:function(t){var n=t.instructions,e=t.params,r=e.pop(),o=e.pop();return e.push(o/r),{instructions:n,params:e}},atan:function(t){var n=t.instructions,e=t.params,r=e.pop();return e.push((0,m.rad2deg)(Math.atan(r))),{instructions:n,params:e}},neg:function(t){var n=t.instructions,e=t.params,r=e.pop();return e.push(-r),{instructions:n,params:e}}},g={barRadius:function(t){var n=t.pen,e=t.instruction;return{pen:y(y({},n),{},{barRadius:e.radius}),commands:null}},bendRadius:function(t){var n=t.pen,e=t.instruction;return{pen:y(y({},n),{},{bendRadius:e.radius}),commands:null}},forward:function(t){var n=t.pen,e=t.instruction,r=n.position.add(n.direction.scale(e.length));return{pen:y(y({},n),{},{position:r}),commands:[{type:"lineto",params:[r.x,r.y]}]}},bend:function(t){var n=t.pen,e=t.instruction,r=n.bendRadius,o=n.direction.rotateDeg(e.angle),i=n.position.add(n.direction.scale(e.lengthToTangent)).add(o.scale(e.lengthToTangent)),a=e.angle>0?1:0,u=(0,m.default)(n.position).dist(i)/2,s=r-Math.sqrt(r*r-u*u);return{pen:y(y({},n),{},{position:i,direction:o}),commands:[{type:"arcto",params:[i.x,i.y,s/u],svgParams:[r,r,0,0,a,i.x,i.y]}]}},turn:function(t){var n=t.pen,e=t.instruction;return{pen:y(y({},n),{},{direction:n.direction.rotateDeg(-e.angle)}),commands:null}}},v=function(t){var n=(t.type,t.params);return{x:n[0],y:n[1]}},x=function(t){var n=t.type,e=t.params,r=t.svgParams,o=e.slice();return o.splice(1,1,-e[1]),"arcto"===n?{type:n,params:o,svgParams:[r[0],r[1],r[2],r[3],r[4]?0:1,r[5],-r[6]]}:{type:n,params:o}};d.prototype.list=function(){return this.path.split(" ")},d.prototype.instructions=function(){var t={instructions:[],params:[]};return this.list().forEach(function(n){b[n]?t=b[n](t):t.params.push(n)}),t.instructions},d.prototype.commands=function(){var t={position:this.initialPosition,direction:this.initialDirection},n=[{type:"moveto",params:[t.position.x,t.position.y]}];return this.instructions().forEach(function(e){var r=g[e.type]({pen:t,instruction:e}),o=r.pen,i=r.commands;i&&(n=n.concat(i)),t=o}),n},d.prototype.segments=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.invertY,e=void 0!==n&&n,r=e?this.commands().map(function(t){return x(t)}):this.commands(),o=v(r[0]),i=[];return r.slice(1).forEach(function(t){var n=v(t),e=(0,m.default)(n).subtract(o),r=(0,m.default)(o).add(e.scale(.5));i.push({type:t.type,points:[o,n],midpoint:r}),o={x:n.x,y:n.y}}),i},d.prototype.steps=function(){return this.instructions().reduce(function(t,n){if("forward"===n.type)t.push({length:n.projectedLength,termination:"cut"});else if(["bend","turn"].includes(n.type)){var e=t[t.length-1],r=t[0];e.termination="bend",e.sign=Math.sign(n.angle),e.angle=Math.abs(n.angle);var o=r&&"bend"===r.termination&&r.sign!==e.sign;e.turn=!!o}return t},[])},d.prototype.length=function(){return this.instructions().reduce(function(t,n){return"forward"===n.type?t+n.length:"bend"===n.type?t+Math.abs(n.radius*(0,m.deg2rad)(n.angle)):t},0)},d.prototype.print=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.invertY,e=void 0!==n&&n,r={moveto:"M",lineto:"L",arcto:"A"};return this.commands().map(function(t){var n=t;e&&(n=x(t));var o="arcto"===n.type?n.svgParams:n.params;return[r[t.type]].concat(i(o)).join(" ")}).join(" ")}},function(t,n,e){!function(n,e){t.exports=e()}("undefined"!=typeof self&&self,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";function r(t){return t*(Math.PI/180)}function o(t){return t*(180/Math.PI)}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,e=t.y;if(!(this instanceof i))return new i({x:n,y:e});this.x=n||0,this.y=e||0}function a(t){return new i(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=a,n.deg2rad=r,n.rad2deg=o,i.prototype.cross=function(t){return this.x*t.y-this.y*t.x},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.divide=function(t){return new i({x:this.x/t.x,y:this.y/t.y})},i.prototype.magnitude=function(){return Math.sqrt(this.dot({x:this.x,y:this.y}))},i.prototype.length=function(){return this.magnitude()},i.prototype.add=function(t){return new i({x:this.x+t.x,y:this.y+t.y})},i.prototype.subtract=function(t){return new i({x:this.x-t.x,y:this.y-t.y})},i.prototype.scale=function(t){return new i({x:this.x*t,y:this.y*t})},i.prototype.multiplyScalar=function(t){return this.scale(t)},i.prototype.angle=function(){return Math.atan2(this.y,this.x)},i.prototype.angleDeg=function(){return o(this.angle())},i.prototype.reverse=function(){return new i({x:-this.x,y:-this.y})},i.prototype.invert=function(){return this.reverse()},i.prototype.normalize=function(){var t=this.magnitude();return t<=0?new i({x:0,y:0}):this.scale(1/t)},i.prototype.direction=function(t){var n=new i(t).subtract({x:this.x,y:this.y}),e=n.magnitude();return e<=0?new i({x:1,y:0}):n.scale(1/e)},i.prototype.equal=function(t){return this.x===t.x&&this.y===t.y},i.prototype.rotate=function(t){return new i({x:Math.cos(t)*this.x-Math.sin(t)*this.y,y:Math.sin(t)*this.x+Math.cos(t)*this.y})},i.prototype.rotateDeg=function(t){var n=r(t);return this.rotate(n)},i.prototype.dist=function(t){return this.subtract(t).magnitude()},i.prototype.distSq=function(t){var n=this.subtract(t);return n.dot({x:n.x,y:n.y})},i.prototype.clone=function(){return new i({x:this.x,y:this.y})},i.prototype.get=function(){return{x:this.x,y:this.y}}}])})}])});